'use strict';const _0x36f876=_0x57a2;(function(_0x36fdd3,_0x1a7f50){const _0x5cf44f=_0x57a2,_0x4b712d=_0x36fdd3();while(!![]){try{const _0x40db79=-parseInt(_0x5cf44f(0xe1))/0x1*(parseInt(_0x5cf44f(0x12e))/0x2)+-parseInt(_0x5cf44f(0xff))/0x3+-parseInt(_0x5cf44f(0xfe))/0x4+parseInt(_0x5cf44f(0xf5))/0x5*(parseInt(_0x5cf44f(0x12a))/0x6)+parseInt(_0x5cf44f(0x10e))/0x7*(parseInt(_0x5cf44f(0xe6))/0x8)+parseInt(_0x5cf44f(0x13b))/0x9*(-parseInt(_0x5cf44f(0x12d))/0xa)+parseInt(_0x5cf44f(0x110))/0xb;if(_0x40db79===_0x1a7f50)break;else _0x4b712d['push'](_0x4b712d['shift']());}catch(_0x42e1f9){_0x4b712d['push'](_0x4b712d['shift']());}}}(_0x25be,0x4dd19));const DEFAULT_CANVAS_WIDTH=0x258,ROTATE_SQUARE_SIZE=0xa,CLICK_MARGIN=0xa,TOUCH_EVS=[_0x36f876(0x10c),'touchmove',_0x36f876(0x146)];let gElCanvas,gCtx,gElImg,gCanvasWidth=DEFAULT_CANVAS_WIDTH,gStartPos={},gIntervalId,gIsListenersAdded=![],gIsMouseDown=![],gIsRotate=![],gIsDrag=![];function openMemeEditor(){const _0x237990=_0x36f876;document['querySelector'](_0x237990(0xfb))?.['classList'][_0x237990(0x129)](_0x237990(0x121)),document[_0x237990(0x103)](_0x237990(0x125))[_0x237990(0x107)]['add']('hidden'),document[_0x237990(0x103)](_0x237990(0x111))[_0x237990(0x107)][_0x237990(0x11d)](_0x237990(0x117)),document['querySelector'](_0x237990(0x13d))[_0x237990(0x107)]['remove'](_0x237990(0x117)),gElImg=null,gElCanvas=document['querySelector'](_0x237990(0x145)),gCtx=gElCanvas[_0x237990(0x14a)]('2d'),gCtx[_0x237990(0x12b)]=0x3,renderFonts(),renderMeme(),resetInputs();if(!gIsListenersAdded)addCanvasEventListeners();onResizeCanvas();}function addCanvasEventListeners(){const _0x50e4f0=_0x36f876;window['addEventListener']('resize',onResizeCanvas),gElCanvas[_0x50e4f0(0x10f)](_0x50e4f0(0x14d),onDown),gElCanvas[_0x50e4f0(0x10f)]('mousemove',onMove),gElCanvas[_0x50e4f0(0x10f)]('mouseup',onUp),gElCanvas[_0x50e4f0(0x10f)](_0x50e4f0(0x10c),onDown),gElCanvas[_0x50e4f0(0x10f)](_0x50e4f0(0x138),onMove),gElCanvas['addEventListener'](_0x50e4f0(0x146),onUp),gElCanvas[_0x50e4f0(0x10f)](_0x50e4f0(0xf4),onKeyPressed),document['addEventListener'](_0x50e4f0(0x14d),()=>gIsMouseDown=!![]),document[_0x50e4f0(0x10f)](_0x50e4f0(0x132),()=>gIsMouseDown=![]),document[_0x50e4f0(0x10f)](_0x50e4f0(0x10c),()=>gIsMouseDown=!![]),document[_0x50e4f0(0x10f)](_0x50e4f0(0x146),()=>gIsMouseDown=![]),document[_0x50e4f0(0x10f)]('mousedown',stopLineEditing),gIsListenersAdded=!![];}function renderMeme(){const _0x188957=_0x36f876,_0x10355e=getMeme();if(!gElImg){const _0x31cd73=getCurrImg();gElImg=getElImg(_0x31cd73['url']),gElImg[_0x188957(0xf1)]=()=>renderImage(_0x10355e);}else renderImage(_0x10355e);}function renderImage(_0x13fc78){const _0x45df09=_0x36f876;gElCanvas[_0x45df09(0xfc)]=gCanvasWidth,gElCanvas['height']=gElImg[_0x45df09(0x104)]*gCanvasWidth/gElImg['naturalWidth'],gCtx[_0x45df09(0x118)](gElImg,0x0,0x0,gElCanvas[_0x45df09(0xfc)],gElCanvas['height']),drawTxt(_0x13fc78[_0x45df09(0xf2)]);const _0x428179=getCurrLine();_0x428179&&drawOutlineRectangle(_0x428179);}function getElImg(_0x34079c){const _0x28a4de=_0x36f876,_0x38bd33=new Image();return _0x38bd33['src']=_0x34079c,_0x38bd33['alt']=_0x28a4de(0x142),_0x38bd33;}function onDown(_0x407018){const _0x2f76f7=_0x36f876,_0xdbde7=getEvPos(_0x407018);let _0xda9d4e=findClickedLineIdx(_0xdbde7);if(_0xda9d4e===-0x1){setLineEmpty(),renderMeme();return;}_0x407018[_0x2f76f7(0xea)](),onSetSelectedLine(_0xda9d4e),renderMeme(),gIsDrag=!![],document[_0x2f76f7(0xef)][_0x2f76f7(0x136)]['cursor']='move',gStartPos['x']=_0xdbde7['x'],gStartPos['y']=_0xdbde7['y'];}function onMove(_0x552a39){clearInterval(gIntervalId);if(!gIsMouseDown||!gIsDrag)return;const _0x24cc9b=getEvPos(_0x552a39),_0x4a752f=_0x24cc9b['x']-gStartPos['x'],_0x460308=_0x24cc9b['y']-gStartPos['y'];gStartPos['x']=_0x24cc9b['x'],gStartPos['y']=_0x24cc9b['y'],setLinePos(_0x4a752f,_0x460308),renderMeme();}function onUp(){const _0x333345=_0x36f876;gIsDrag=![],gIsRotate=![],document['body'][_0x333345(0x136)]['cursor']='default';}function getEvPos(_0x3a3c7a){const _0xb5f00c=_0x36f876;let _0x28df01={'x':_0x3a3c7a['offsetX'],'y':_0x3a3c7a[_0xb5f00c(0xe8)]};return TOUCH_EVS[_0xb5f00c(0x126)](_0x3a3c7a['type'])&&(_0x3a3c7a=_0x3a3c7a['changedTouches'][0x0],_0x28df01={'x':_0x3a3c7a[_0xb5f00c(0x109)]-_0x3a3c7a['target'][_0xb5f00c(0x128)]-_0x3a3c7a[_0xb5f00c(0x135)][_0xb5f00c(0xf6)],'y':_0x3a3c7a[_0xb5f00c(0x13c)]-_0x3a3c7a[_0xb5f00c(0x135)]['offsetTop']-_0x3a3c7a['target'][_0xb5f00c(0x14e)]}),_0x28df01;}function findClickedLineIdx(_0x1b13e4){const _0x64797a=_0x36f876,_0x251072=getMeme();return _0x251072[_0x64797a(0xf2)]['findIndex'](_0x4f7395=>{const _0x1a7926=_0x64797a;gCtx[_0x1a7926(0x141)](),gCtx[_0x1a7926(0xee)]=_0x4f7395[_0x1a7926(0x11c)]+_0x1a7926(0x11f)+_0x4f7395[_0x1a7926(0xee)];const _0x139ead=gCtx['measureText'](_0x4f7395[_0x1a7926(0x123)])['width'];let {x:_0xa54aea,y:_0x180173}=_0x4f7395[_0x1a7926(0x11a)],_0x42fb7c=_0xa54aea+_0x139ead,_0xcdd4e9=_0x180173-_0x4f7395[_0x1a7926(0x11c)];return _0x4f7395[_0x1a7926(0x115)]===_0x1a7926(0xf9)&&(_0xa54aea-=_0x139ead/0x2,_0x42fb7c-=_0x139ead/0x2),_0x4f7395[_0x1a7926(0x115)]===_0x1a7926(0xf0)&&(_0xa54aea-=_0x139ead,_0x42fb7c-=_0x139ead),_0xa54aea-=CLICK_MARGIN,_0x42fb7c+=CLICK_MARGIN,_0xcdd4e9-=CLICK_MARGIN,_0x180173+=CLICK_MARGIN,gCtx['restore'](),_0x1b13e4['x']>_0xa54aea&&_0x1b13e4['x']<_0x42fb7c&&_0x1b13e4['y']>_0xcdd4e9&&_0x1b13e4['y']<_0x180173;});}function drawOutlineRectangle(_0x426b41){const _0x534ce6=_0x36f876;gCtx['save'](),gCtx[_0x534ce6(0x12b)]=0x3,gCtx[_0x534ce6(0x116)]='#000000';let {x:_0x2c8041,y:_0x2d9fa3}=_0x426b41[_0x534ce6(0x11a)];_0x2d9fa3-=_0x426b41[_0x534ce6(0x11c)],gCtx[_0x534ce6(0xee)]=_0x426b41['size']+_0x534ce6(0x11f)+_0x426b41[_0x534ce6(0xee)];const _0x246982=gCtx[_0x534ce6(0x14c)](_0x426b41[_0x534ce6(0x123)])[_0x534ce6(0xfc)];_0x426b41['align']==='center'&&(_0x2c8041=_0x2c8041-_0x246982/0x2),_0x426b41[_0x534ce6(0x115)]==='right'&&(_0x2c8041=_0x2c8041-_0x246982),_0x2c8041-=CLICK_MARGIN,gCtx[_0x534ce6(0x14b)](),gCtx['rect'](_0x2c8041,_0x2d9fa3,_0x246982+CLICK_MARGIN*0x2,_0x426b41[_0x534ce6(0x11c)]+CLICK_MARGIN),gCtx[_0x534ce6(0xe4)](),gCtx['restore']();}function renderFonts(){const _0x23404a=_0x36f876,_0x21e3c7=getFonts(),_0x1e490f=_0x21e3c7[_0x23404a(0x114)](_0x21f1a5=>'<option\x20value=\x22'+_0x21f1a5+'\x22>'+_0x21f1a5[_0x23404a(0xed)]()+_0x23404a(0x12f))[_0x23404a(0x120)](''),_0x50c2de=document[_0x23404a(0x103)]('.font-picker');_0x50c2de['innerHTML']=_0x1e490f;}function renderFontInputs(){const _0x502c12=_0x36f876,_0x3b1daf=getMeme(),_0x1dc79c=_0x3b1daf[_0x502c12(0x124)],_0x13c7c5=_0x3b1daf[_0x502c12(0xf2)][_0x1dc79c]||0x0;document[_0x502c12(0x103)](_0x502c12(0x140))[_0x502c12(0x108)]=_0x13c7c5['strokeStyle'],document[_0x502c12(0x103)](_0x502c12(0x133))[_0x502c12(0x108)]=_0x13c7c5[_0x502c12(0xe5)],document['querySelector'](_0x502c12(0x10a))[_0x502c12(0x136)][_0x502c12(0x127)]=_0x13c7c5[_0x502c12(0x116)],document[_0x502c12(0x103)](_0x502c12(0xec))[_0x502c12(0x136)][_0x502c12(0x127)]=_0x13c7c5[_0x502c12(0xe5)],document['querySelector'](_0x502c12(0x143))[_0x502c12(0x108)]=_0x13c7c5[_0x502c12(0xee)];}function drawTxt(_0x27ce2d){const _0x5180df=_0x36f876;_0x27ce2d[_0x5180df(0x11e)](_0x2f2efc=>{const _0x3b0082=_0x5180df,{x:_0x3c1fcf,y:_0x36ac44}=_0x2f2efc['pos'];gCtx[_0x3b0082(0x116)]=_0x2f2efc[_0x3b0082(0x116)],gCtx[_0x3b0082(0xe5)]=_0x2f2efc[_0x3b0082(0xe5)],gCtx[_0x3b0082(0x100)]=_0x2f2efc[_0x3b0082(0x115)],gCtx[_0x3b0082(0xee)]=_0x2f2efc[_0x3b0082(0x11c)]+_0x3b0082(0x139)+_0x2f2efc[_0x3b0082(0xee)],gCtx[_0x3b0082(0x122)](_0x2f2efc['txt'],_0x3c1fcf,_0x36ac44),gCtx[_0x3b0082(0x113)](_0x2f2efc[_0x3b0082(0x123)],_0x3c1fcf,_0x36ac44);});}function stopLineEditing(_0x4a63c3){const _0x393c9b=_0x36f876;let _0x2249aa=_0x4a63c3[_0x393c9b(0x135)];do{if([_0x393c9b(0x106),_0x393c9b(0x101),'A',_0x393c9b(0x10d),_0x393c9b(0x130)]['includes'](_0x2249aa[_0x393c9b(0xfa)]))return;_0x2249aa=_0x2249aa[_0x393c9b(0x105)];}while(_0x2249aa);setLineEmpty(),renderMeme();}function onAddTxt(_0x1b317f){const _0x5f03c0=_0x36f876,_0x1c6f08=_0x1b317f[_0x5f03c0(0x108)];setLineTxt(_0x1c6f08),renderMeme();}function onSetSelectedLine(_0x3c5e1f){const _0x52ed41=_0x36f876;setSelectedLine(_0x3c5e1f);const _0x376955=getCurrLine();if(_0x376955['txt']!==_0x52ed41(0x148))document[_0x52ed41(0x103)]('.meme-text-input')[_0x52ed41(0x108)]=_0x376955[_0x52ed41(0x123)];renderFontInputs();}function resetInputs(){const _0x4ef435=_0x36f876;document[_0x4ef435(0x103)]('.meme-text-input')[_0x4ef435(0x108)]='',renderFontInputs();}function onAddLine(){const _0x5955e6=_0x36f876,_0x53c358=document[_0x5955e6(0x103)](_0x5955e6(0xe7))[_0x5955e6(0x108)];addLine(_0x53c358),renderMeme();}function onDeleteLine(){const _0xa5439e=_0x36f876;document['querySelector'](_0xa5439e(0xe7))['value']='',deleteLine(),renderMeme();}function onSwitchLine(){switchLine(),renderFontInputs(),renderMeme();}function onUpdateLineSize(_0x270cbc){updateLineSize(_0x270cbc),renderMeme();}function onSetAlignment(_0x3d6dec){setLineAlign(_0x3d6dec),renderMeme();}function onSetFont(_0xb58e7a){const _0xe5db06=_0x36f876;setLineFont(_0xb58e7a[_0xe5db06(0x108)]),renderMeme();}function _0x57a2(_0x2de1b9,_0x4bf2ec){const _0x25bebc=_0x25be();return _0x57a2=function(_0x57a2a6,_0x22de5e){_0x57a2a6=_0x57a2a6-0xe1;let _0x3951eb=_0x25bebc[_0x57a2a6];return _0x3951eb;},_0x57a2(_0x2de1b9,_0x4bf2ec);}function onSetStrokeStyle(_0x18d260){const _0x488089=_0x36f876;_0x18d260[_0x488089(0x105)][_0x488089(0x136)][_0x488089(0x127)]=_0x18d260[_0x488089(0x108)],setStrokeStyle(_0x18d260[_0x488089(0x108)]),renderMeme();}function onSetFillStyle(_0x4eacdf){const _0x26969=_0x36f876;_0x4eacdf[_0x26969(0x105)][_0x26969(0x136)][_0x26969(0x127)]=_0x4eacdf['value'],setFillStyle(_0x4eacdf[_0x26969(0x108)]),renderMeme();}function onDownloadMeme(_0x5c5973){const _0x1be15e=_0x36f876;setLineEmpty(),renderMeme();const _0x1377a4=gElCanvas[_0x1be15e(0x13f)]('image/jpeg');_0x5c5973[_0x1be15e(0x149)]=getCurrImg()[_0x1be15e(0x137)],_0x5c5973[_0x1be15e(0x13e)]=_0x1377a4;}function _0x25be(){const _0x2f52d0=['open','querySelector','naturalHeight','parentNode','INPUT','classList','value','pageX','.stroke-color-icon','error','touchstart','CANVAS','3827887EvgdFt','addEventListener','2085655quIDQY','.meme-saved-page','append','strokeText','map','align','strokeStyle','hidden','drawImage','\x0aGot\x20response\x20data:','pos','https://www.facebook.com/sharer/sharer.php?u=','size','add','forEach','px\x20','join','active','fillText','txt','selectedLineIdx','.meme-gallery-page','includes','color','offsetLeft','remove','6rHyhif','lineWidth','POST','50CObFNG','59992JrSABt','</option>','SELECT','Error\x20connecting\x20to\x20server\x20with\x20request:','mouseup','.fill-color-input','onreadystatechange','target','style','name','touchmove','px\x20\x20','status','167409pxugbL','pageY','.meme-editor-page','href','toDataURL','.stroke-color-input','save','meme','.font-picker','Error\x20uploading\x20image','.meme-editor-canvas','touchend','onerror','Add\x20Text\x20Here','download','getContext','beginPath','measureText','mousedown','clientTop','5Obommc','image/jpeg','send','stroke','fillStyle','8sSxwnc','.meme-text-input','offsetY','min','preventDefault','DONE','.fill-color-icon','toUpperCase','font','body','right','onload','lines','//ca-upload.com/here/upload.php','keydown','2433985zcAtgY','clientLeft','.save-confirmation-modal','key','center','nodeName','.active','width','shown','270612BEteHm','1781580elDDxb','textAlign','BUTTON'];_0x25be=function(){return _0x2f52d0;};return _0x25be();}function onSaveMeme(){const _0x455428=_0x36f876;setLineEmpty(),renderMeme();const _0x34f096=getMeme(),_0x2ac635=getCurrImg(),_0x5709fe=gElCanvas[_0x455428(0x13f)](_0x455428(0xe2));saveMeme(_0x34f096,_0x2ac635,_0x5709fe);const _0x48eac2=document['querySelector'](_0x455428(0xf7));_0x48eac2[_0x455428(0x107)][_0x455428(0x11d)](_0x455428(0xfd)),setTimeout(()=>{const _0x15796e=_0x455428;_0x48eac2[_0x15796e(0x107)][_0x15796e(0x129)](_0x15796e(0xfd));},0x7d0);}function onShareMeme(){const _0xa48404=_0x36f876;setLineEmpty(),renderMeme();const _0x57838d=gElCanvas['toDataURL'](_0xa48404(0xe2));function _0x55e706(_0x22722){const _0x558947=_0xa48404,_0x2437d7=encodeURIComponent(_0x22722);window[_0x558947(0x102)](_0x558947(0x11b)+_0x2437d7+'&t='+_0x2437d7);}doUploadImg(_0x57838d,_0x55e706);}function doUploadImg(_0xe9aeda,_0x19f6f1){const _0x269ce0=_0x36f876,_0x56a10d=new FormData();_0x56a10d[_0x269ce0(0x112)]('img',_0xe9aeda);const _0x383388=new XMLHttpRequest();_0x383388[_0x269ce0(0x134)]=()=>{const _0x534a8d=_0x269ce0;if(_0x383388['readyState']!==XMLHttpRequest[_0x534a8d(0xeb)])return;if(_0x383388[_0x534a8d(0x13a)]!==0xc8)return console[_0x534a8d(0x10b)](_0x534a8d(0x144));const _0x403524=_0x383388['responseText'];_0x19f6f1(_0x403524);},_0x383388[_0x269ce0(0x147)]=(_0x201545,_0x1772b9)=>{const _0x85b022=_0x269ce0;console[_0x85b022(0x10b)](_0x85b022(0x131),_0x201545,_0x85b022(0x119),_0x1772b9);},_0x383388['open'](_0x269ce0(0x12c),_0x269ce0(0xf3)),_0x383388[_0x269ce0(0xe3)](_0x56a10d);}function onResizeCanvas(){const _0x2de5bd=_0x36f876;gCanvasWidth=Math[_0x2de5bd(0xe9)](window['innerWidth'],DEFAULT_CANVAS_WIDTH),renderMeme();}function onKeyPressed(_0x3e4874){const _0x594bbf=_0x36f876;document[_0x594bbf(0x103)](_0x594bbf(0xe7))[_0x594bbf(0x108)]+=_0x3e4874[_0x594bbf(0xf8)],appendLineTxt(_0x3e4874[_0x594bbf(0xf8)]),renderMeme();}