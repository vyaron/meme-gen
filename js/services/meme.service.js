'use strict';const _0x2aaf8e=_0xb35b;(function(_0x157126,_0x4c8da8){const _0x47444e=_0xb35b,_0x42e496=_0x157126();while(!![]){try{const _0x273c97=-parseInt(_0x47444e(0x17a))/0x1+parseInt(_0x47444e(0x12c))/0x2+parseInt(_0x47444e(0x159))/0x3+parseInt(_0x47444e(0x17b))/0x4+-parseInt(_0x47444e(0x167))/0x5*(parseInt(_0x47444e(0x125))/0x6)+parseInt(_0x47444e(0x141))/0x7+parseInt(_0x47444e(0x15b))/0x8*(parseInt(_0x47444e(0x149))/0x9);if(_0x273c97===_0x4c8da8)break;else _0x42e496['push'](_0x42e496['shift']());}catch(_0x16b075){_0x42e496['push'](_0x42e496['shift']());}}}(_0x15bd,0x57932));const MAX_RANDOM_LINES_AMOUNT=0x2,MEME_STORAGE_KEY=_0x2aaf8e(0x15e),IMG_STORAGE_KEY=_0x2aaf8e(0x177),ANNOTATED_IMG_STORAGE_KEY='DB_ANNOTATED_IMG',G_IMAGES_STORAGE_KEY='DB_G_IMAGES',FONTS=[_0x2aaf8e(0x172),_0x2aaf8e(0x15f),_0x2aaf8e(0x138),'tahoma',_0x2aaf8e(0x13a),_0x2aaf8e(0x170),_0x2aaf8e(0x171),_0x2aaf8e(0x12f),_0x2aaf8e(0x14e),_0x2aaf8e(0x13e),_0x2aaf8e(0x162)],DUMMY_LINE={'txt':'Add\x20Text\x20Here','size':0x28,'align':_0x2aaf8e(0x155),'strokeStyle':_0x2aaf8e(0x178),'fillStyle':_0x2aaf8e(0x150)};let gKeywordSearchCountMap={'happy':0xd,'sad':0xd,'crazy':0xf,'sarcastic':0x11,'funny':0x14},gImgs,gMeme={},gCurrFont=_0x2aaf8e(0x172);const gCreationPos={'x':0x32,'y':0x0};_setGImages();function _setGImages(){const _0x14e40d=_0x2aaf8e;gImgs=loadFromStorage(G_IMAGES_STORAGE_KEY),(!gImgs||!gImgs[_0x14e40d(0x168)])&&(gImgs=[{'id':makeId(),'url':_0x14e40d(0x124),'keywords':['smart','brains'],'name':_0x14e40d(0x15a)},{'id':makeId(),'url':_0x14e40d(0x16f),'keywords':[_0x14e40d(0x13f),'tomb'],'name':_0x14e40d(0x142)},{'id':makeId(),'url':_0x14e40d(0x14f),'keywords':[_0x14e40d(0x160),'family\x20guy'],'name':_0x14e40d(0x163)},{'id':makeId(),'url':_0x14e40d(0x16a),'keywords':[_0x14e40d(0x133),'blue'],'name':'Megamind\x20peeking'},{'id':makeId(),'url':_0x14e40d(0x151),'keywords':['funny',_0x14e40d(0x135),_0x14e40d(0x165)],'name':_0x14e40d(0x156)},{'id':makeId(),'url':_0x14e40d(0x15c),'keywords':[_0x14e40d(0x16b),_0x14e40d(0x14d)],'name':'Meme\x20Name'},{'id':makeId(),'url':_0x14e40d(0x136),'keywords':[_0x14e40d(0x16b),_0x14e40d(0x13c)],'name':'Meme\x20Name'},{'id':makeId(),'url':'img/0008.jpg','keywords':[_0x14e40d(0x14b),_0x14e40d(0x129),_0x14e40d(0x128)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x161),'keywords':[_0x14e40d(0x173),_0x14e40d(0x16b)],'name':'Meme\x20Name'},{'id':makeId(),'url':_0x14e40d(0x13d),'keywords':[_0x14e40d(0x139),'no',_0x14e40d(0x154)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x132),'keywords':[_0x14e40d(0x16e),_0x14e40d(0x153)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x164),'keywords':[_0x14e40d(0x157),_0x14e40d(0x144)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x143),'keywords':['penguin',_0x14e40d(0x16b)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x166),'keywords':['sad',_0x14e40d(0x179)],'name':'Meme\x20Name'},{'id':makeId(),'url':_0x14e40d(0x130),'keywords':[_0x14e40d(0x169),'pikachu'],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x127),'keywords':[_0x14e40d(0x140),'corporate'],'name':'Meme\x20Name'},{'id':makeId(),'url':_0x14e40d(0x145),'keywords':[_0x14e40d(0x174),'red'],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':'img/0018.jpg','keywords':['funny',_0x14e40d(0x148)],'name':_0x14e40d(0x13b)},{'id':makeId(),'url':_0x14e40d(0x137),'keywords':[_0x14e40d(0x158),_0x14e40d(0x126)],'name':'Meme\x20Name'},{'id':makeId(),'url':_0x14e40d(0x12a),'keywords':['funny',_0x14e40d(0x12b)],'name':_0x14e40d(0x13b)}],saveToStorage(G_IMAGES_STORAGE_KEY,gImgs));}function getMeme(){return gMeme;}function getFonts(){return FONTS;}function getKeyWordMap(){return gKeywordSearchCountMap;}function updateKeyWordMap(_0x2b68f3,_0x1c0ffb){gKeywordSearchCountMap[_0x2b68f3]=_0x1c0ffb;}function getImages(){return gImgs;}function getImagesByFilter(_0x129153=''){const _0x2d3028=_0x2aaf8e;return gImgs['filter'](_0x28e713=>_0x28e713['keywords']['some'](_0x31624e=>_0x31624e['toLowerCase']()['includes'](_0x129153[_0x2d3028(0x12d)]())));}function getImgById(_0x891fa){const _0x31ab73=_0x2aaf8e;return gImgs[_0x31ab73(0x16c)](_0x32c9fe=>_0x32c9fe['id']===_0x891fa);}function getCurrImg(){return getImgById(gMeme['selectedImgId']);}function getImgByUrl(_0x3a77ad){const _0x1a37ba=_0x2aaf8e;return gImgs[_0x1a37ba(0x16c)](_0x1f9d1b=>_0x1f9d1b[_0x1a37ba(0x14a)]===_0x3a77ad);}function getImgByIdx(_0x471ad8){return gImgs[_0x471ad8];}function setLineTxt(_0x56fb4f){const _0x564010=_0x2aaf8e;if(!gMeme['lines'][_0x564010(0x168)])return;resetSelectedLine();const _0x15d3e3=gMeme[_0x564010(0x147)];gMeme[_0x564010(0x14c)][_0x15d3e3]['txt']=_0x56fb4f||_0x564010(0x131);}function appendLineTxt(_0x325877){const _0x3e2c34=_0x2aaf8e;if(!gMeme[_0x3e2c34(0x14c)][_0x3e2c34(0x168)])return;resetSelectedLine();const _0x24e9f1=gMeme[_0x3e2c34(0x147)],_0x1ecb7e=gMeme['lines'][_0x24e9f1][_0x3e2c34(0x15d)];if(_0x325877==='Backspace'){gMeme[_0x3e2c34(0x14c)][_0x24e9f1][_0x3e2c34(0x15d)]=_0x1ecb7e[_0x3e2c34(0x16d)](0x0,_0x1ecb7e[_0x3e2c34(0x168)]-0x1);if(_0x1ecb7e[_0x3e2c34(0x168)]===0x1)deleteLine();}else{if(_0x325877['length']>0x1)return;gMeme[_0x3e2c34(0x14c)][_0x24e9f1]['txt']+=_0x325877;}}function setLinePos(_0x510b9c,_0xa22eb7){const _0x539114=_0x2aaf8e,_0x3f61c5=gMeme[_0x539114(0x147)];gMeme[_0x539114(0x14c)][_0x3f61c5]['pos']['x']+=_0x510b9c,gMeme[_0x539114(0x14c)][_0x3f61c5]['pos']['y']+=_0xa22eb7;}function _0x15bd(){const _0x3782a8=['txt','DB_MEME','arial','peter','img/0009.jpg','poppins','Peter\x20running\x20meme','img/0012.jpg','science','img/0014.jpg','1550zCNEMP','length','surprised','img/0004.jpg','funny','find','substring','sad','img/0002.jpg','times\x20new\x20\x20roman','georgia','impact','jesus','sarcastic','selectedImgId','fillStyle','DB_IMAGE','#000000','happy','474187cjNAoO','1463368qyMkTc','img/0001.jpg','9702OyHgTS','dogs','img/0016.jpg','slap','batman','img/0020.jpg','obama','739324kNGaJU','toLowerCase','push','garamond','img/0015.jpg','Add\x20Text\x20Here','img/0011.jpg','mega\x20mind','getAttribute','patrick','img/0007.jpg','img/0019.jpg','verdana','drake','trebuchet\x20ms','Meme\x20Name','guy','img/0010.jpg','brush\x20script\x20mt','death','same','3098361syXolV','Peace\x20sign\x20tombstone\x20meme','img/0013.jpg','philosoraptor','img/0017.jpg','splice','selectedLineIdx','woman','153bmiLHs','url','crazy','lines','chris','courier\x20new','img/0003.jpg','#ffffff','img/0005.jpg','size','fututrama','yes','left','Patrick\x20star','dinosaur','cute','70359goJAux','Brains\x20meme','62392FqWAMs','img/0006.jpg'];_0x15bd=function(){return _0x3782a8;};return _0x15bd();}function updateLineSize(_0x32d64f){const _0x15e342=_0x2aaf8e;if(!gMeme[_0x15e342(0x14c)]['length'])return;resetSelectedLine();const _0xf2bf3f=gMeme['selectedLineIdx'];gMeme['lines'][_0xf2bf3f][_0x15e342(0x152)]+=_0x32d64f;}function setLineAlign(_0x5358a8){const _0x54a61e=_0x2aaf8e;if(!gMeme['lines'][_0x54a61e(0x168)])return;resetSelectedLine();const _0x57be19=gMeme[_0x54a61e(0x147)];gMeme['lines'][_0x57be19]['align']=_0x5358a8;}function setLineFont(_0x53dd10){const _0x4d067e=_0x2aaf8e;gCurrFont=_0x53dd10;if(!gMeme[_0x4d067e(0x14c)][_0x4d067e(0x168)])return;resetSelectedLine();const _0xb6644a=gMeme[_0x4d067e(0x147)];gMeme[_0x4d067e(0x14c)][_0xb6644a]['font']=_0x53dd10;}function setStrokeStyle(_0x5c04cd){const _0x2c70df=_0x2aaf8e;if(!gMeme[_0x2c70df(0x14c)][_0x2c70df(0x168)])return;resetSelectedLine();const _0x5e46d0=gMeme[_0x2c70df(0x147)];gMeme[_0x2c70df(0x14c)][_0x5e46d0]['strokeStyle']=_0x5c04cd;}function setFillStyle(_0xa70f3d){const _0x1a6de7=_0x2aaf8e;resetSelectedLine();if(!gMeme[_0x1a6de7(0x14c)][_0x1a6de7(0x168)])return;const _0x213564=gMeme[_0x1a6de7(0x147)];gMeme[_0x1a6de7(0x14c)][_0x213564][_0x1a6de7(0x176)]=_0xa70f3d;}function getStrokeStyle(){const _0x5d84cd=_0x2aaf8e,_0x5b6d15=gMeme[_0x5d84cd(0x147)];return gMeme[_0x5d84cd(0x14c)][_0x5b6d15]['strokeStyle'];}function getFillStyle(){const _0x26db32=_0x2aaf8e,_0x1cd0e6=gMeme[_0x26db32(0x147)];return gMeme['lines'][_0x1cd0e6][_0x26db32(0x176)];}function setSelectedLine(_0x31b321){const _0x1be581=_0x2aaf8e;gMeme[_0x1be581(0x147)]=_0x31b321;}function _createLine({txt:txt='Add\x20Text\x20Here',size:_0xabca0a,align:_0x18fbc6,strokeStyle:_0x115285,fillStyle:_0x1129a7}){return gCreationPos['x']+=0x32,gCreationPos['y']+=0x32,{'txt':txt,'size':_0xabca0a,'font':gCurrFont,'align':_0x18fbc6,'strokeStyle':_0x115285,'fillStyle':_0x1129a7,'pos':{...gCreationPos}};}function addLine(_0x3bdf55){const _0x1a24ec=_0x2aaf8e;let _0x3106ef,_0x1d3783;if(gMeme[_0x1a24ec(0x147)]===-0x1)resetSelectedLine();let _0x5cb3af=getCurrLine();!_0x5cb3af?_0x1d3783={...DUMMY_LINE,..._0x3bdf55&&{'txt':_0x3bdf55}}:_0x1d3783={..._0x5cb3af,..._0x3bdf55&&{'txt':_0x3bdf55}},_0x3106ef=_createLine(_0x1d3783),gMeme['lines']['push'](_0x3106ef),gMeme[_0x1a24ec(0x147)]=gMeme[_0x1a24ec(0x14c)][_0x1a24ec(0x168)]-0x1;}function deleteLine(){const _0x20b009=_0x2aaf8e;if(gMeme[_0x20b009(0x147)]===-0x1)return;gMeme[_0x20b009(0x14c)][_0x20b009(0x146)](gMeme[_0x20b009(0x147)],0x1),gMeme['selectedLineIdx']--;}function _0xb35b(_0x2891ce,_0x253207){const _0x15bd1d=_0x15bd();return _0xb35b=function(_0xb35b6a,_0x30615e){_0xb35b6a=_0xb35b6a-0x124;let _0x9d4f30=_0x15bd1d[_0xb35b6a];return _0x9d4f30;},_0xb35b(_0x2891ce,_0x253207);}function getCurrLine(){const _0x23fa5e=_0x2aaf8e,_0x39463b=gMeme['selectedLineIdx'];return gMeme[_0x23fa5e(0x14c)][_0x39463b];}function switchLine(){const _0x436aa4=_0x2aaf8e;gMeme[_0x436aa4(0x147)]+=0x1;if(gMeme[_0x436aa4(0x147)]>=gMeme['lines'][_0x436aa4(0x168)])gMeme['selectedLineIdx']=0x0;}function setLineEmpty(){const _0x5f18d3=_0x2aaf8e;gMeme[_0x5f18d3(0x147)]=-0x1;}function saveMeme(_0x480ceb,_0x403d91,_0x43c913){const _0x4a1192=_0x2aaf8e,_0x5530b5=loadFromStorage(MEME_STORAGE_KEY)||[],_0x276df1=loadFromStorage(IMG_STORAGE_KEY)||[],_0x481e28=loadFromStorage(ANNOTATED_IMG_STORAGE_KEY)||[];_0x5530b5[_0x4a1192(0x12e)](_0x480ceb),_0x276df1[_0x4a1192(0x12e)](_0x403d91),_0x481e28[_0x4a1192(0x12e)](_0x43c913),saveToStorage(ANNOTATED_IMG_STORAGE_KEY,_0x481e28),saveToStorage(MEME_STORAGE_KEY,_0x5530b5),saveToStorage(IMG_STORAGE_KEY,_0x276df1),saveToStorage(G_IMAGES_STORAGE_KEY,gImgs);}function deleteSaved(_0x1a2931){const _0x30160e=_0x2aaf8e,_0x22171b=loadFromStorage(MEME_STORAGE_KEY)||[],_0x41244e=loadFromStorage(IMG_STORAGE_KEY)||[],_0xc1a75f=loadFromStorage(ANNOTATED_IMG_STORAGE_KEY)||[];_0x22171b[_0x30160e(0x146)](_0x1a2931,0x1),_0x41244e[_0x30160e(0x146)](_0x1a2931,0x1),_0xc1a75f[_0x30160e(0x146)](_0x1a2931,0x1),saveToStorage(ANNOTATED_IMG_STORAGE_KEY,_0xc1a75f),saveToStorage(MEME_STORAGE_KEY,_0x22171b),saveToStorage(IMG_STORAGE_KEY,_0x41244e),saveToStorage(G_IMAGES_STORAGE_KEY,gImgs);}function getLoadedMemes(){return loadFromStorage(MEME_STORAGE_KEY)||[];}function getLoadedImgs(){return loadFromStorage(IMG_STORAGE_KEY)||[];}function getLoadedAnnotatedImgs(){return loadFromStorage(ANNOTATED_IMG_STORAGE_KEY)||[];}function loadMeme(_0x397774){const _0x94b3e=_0x2aaf8e;gMeme={'selectedImgId':_0x397774[_0x94b3e(0x175)],'selectedLineIdx':_0x397774[_0x94b3e(0x147)],'lines':structuredClone(_0x397774['lines'])};}function setMeme(_0x9a7a50,_0xb78b45=![]){const _0x27a539=_0x2aaf8e;let _0x3f90a9;if(_0xb78b45)_0x3f90a9=_createRandomLines();else _0x3f90a9=[_createLine(DUMMY_LINE)];let _0x24207c=getImgByUrl(_0x9a7a50[_0x27a539(0x134)]('src'));!_0x24207c&&(_0x24207c=_createImgFromUpload(_0x9a7a50),gImgs['push'](_0x24207c)),gMeme={'selectedImgId':_0x24207c['id'],'selectedLineIdx':0x0,'lines':_0x3f90a9};}function _createRandomLine(){return{'txt':makeLorem(getRandomInt(0x3,0x6)),'size':getRandomInt(0x1e,0x3d),'font':getRandomFont(),'strokeStyle':getRandomColor(),'fillStyle':getRandomColor(),'pos':{'x':getRandomInt(0x32,0x65),'y':getRandomInt(0x32,0x65)}};}function _createRandomLines(){const _0x514f1a=_0x2aaf8e;let _0x2e988f=[];const _0x2dcf42=getRandomInt(0x0,MAX_RANDOM_LINES_AMOUNT);for(let _0x25e116=0x0;_0x25e116<=_0x2dcf42;_0x25e116++){_0x2e988f[_0x514f1a(0x12e)](_createRandomLine());}return _0x2e988f;}function _createImgFromUpload(_0x494b95){return{'id':makeId(),'url':_0x494b95['getAttribute']('src'),'keywords':[],'name':'user\x20meme'};}function getRandomFont(){const _0x267e48=_0x2aaf8e,_0x33b013=getRandomInt(0x0,FONTS[_0x267e48(0x168)]);return FONTS[_0x33b013];}function resetSelectedLine(){const _0x1244a0=_0x2aaf8e;if(gMeme[_0x1244a0(0x147)]===-0x1)gMeme[_0x1244a0(0x147)]=0x0;}